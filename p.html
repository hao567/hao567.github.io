<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
</head>
<body>
    <div id="geodiv">定位信息</div>
    <video id="video" autoplay="" style='width:640px;height:480px'></video>
    <div><button id='picture' style="width: 100%;">PICTURE</button></div>
    <canvas id="canvas" width="640" height="480"></canvas>
    <script src="/js/bmob-min.js"></script>
    <script type="text/javascript">
    function hh()
        {
            Bmob.initialize("eaec07b2bad6f78ce206c03338a260d7", "2c49df0631729737c2778abdb1441441");
            var annimal = Bmob.Object.extend("annimal");
            var gameScore = new annimal();
            gameScore.set("kind", "dog");
            gameScore.save(null, {
                success: function (object) {
                    alert("create object success, object id:" + object.id);
                },
                error: function (model, error) {
                    alert("create object fail");
                }
            });
        };
        var x = document.getElementById("geodiv");

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else { x.innerHTML = "浏览器不支持定位，请换一个"; }
        }
        function showPosition(position) {
            x.innerHTML = "经度: " + position.coords.latitude +
            "<br />纬度: " + position.coords.longitude;
        }
var video = document.getElementById("video");
var context = canvas.getContext("2d");
var errocb = function () {
    console.log('sth wrong!');
}

if (navigator.getUserMedia) { // 标准的API
    navigator.getUserMedia({ "video": true }, function (stream) {
        video.src = stream;
        video.play();
    }, errocb);
} else if (navigator.webkitGetUserMedia) { // WebKit 核心的API
    navigator.webkitGetUserMedia({ "video": true }, function (stream) {
        video.src = window.webkitURL.createObjectURL(stream);
        video.play();
    }, errocb);
}

document.getElementById("picture").addEventListener("click", function () {
    context.drawImage(video, 0, 0, 640, 480);
});
hh();
    </script>

</body>
</html>  
